<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Afia's Birthday — Celebration</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f172a;
      --card: #1e293b;
      --accent: #f472b6;
      --accent-secondary: #facc15;
      --muted: #94a3b8;
      --glass: rgba(255,255,255,0.1);
      --glass-2: rgba(255,255,255,0.05);
      --max-width: 1280px;
      --radius: 24px;
      --shadow: 0 8px 32px rgba(0,0,0,0.2);
      font-family: 'Inter', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      font-size: 16px;
      scroll-behavior: smooth;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      background: linear-gradient(180deg, #0f172a 0%, #1e3a8a 100%);
      color: #f1f5f9;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }
    .container { max-width: var(--max-width); margin: 64px auto; padding: 32px; position: relative; z-index: 10; }

    /* Balloon Canvas */
    #balloonCvs {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 5;
    }

    /* NAV */
    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      position: sticky;
      top: 16px;
      background: var(--glass);
      backdrop-filter: blur(10px);
      padding: 16px 32px;
      z-index: 100;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin: 0 16px;
      animation: slideIn 0.5s ease;
    }
    @keyframes slideIn {
      from { transform: translateY(-20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .brand { display: flex; gap: 12px; align-items: center; }
    .logo {
      width: 64px;
      height: 64px;
      background: linear-gradient(135deg, var(--accent), var(--accent-secondary));
      border-radius: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Playfair Display', serif;
      font-size: 24px;
      font-weight: 700;
      color: #0f172a;
      box-shadow: 0 0 15px var(--accent);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .logo:hover { transform: scale(1.1); box-shadow: 0 0 20px var(--accent); }
    nav a {
      color: var(--muted);
      text-decoration: none;
      margin-left: 24px;
      font-weight: 600;
      transition: color 0.3s ease;
    }
    nav a:hover { color: var(--accent); }

    /* HERO + SLIDER */
    .hero {
      margin-top: 32px;
      background: var(--glass);
      border-radius: var(--radius);
      padding: 32px;
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 32px;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow);
      animation: fadeInUp 0.8s ease;
    }
    @keyframes fadeInUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    .hero::before {
      content: '';
      position: absolute;
      inset: 0;
      background: url('https://images.unsplash.com/photo-1519741491286-3f07c9b3bfa9?auto=format&fit=crop&w=1400&q=80') center/cover;
      opacity: 0.15;
      z-index: -1;
      transform: translateY(30px) scale(1.1);
      transition: transform 0.5s ease;
    }
    .hero:hover::before { transform: translateY(0) scale(1); }
    .slider {
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      background: var(--glass-2);
      box-shadow: var(--shadow);
    }
    .slides {
      position: relative;
      width: 100%;
      height: 400px;
    }
    .slide {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: flex-end;
      background-size: cover;
      background-position: center;
      padding: 32px;
      opacity: 0;
      transform: scale(1.05);
      transition: opacity 0.6s ease, transform 0.6s ease;
    }
    .slide.active {
      opacity: 1;
      transform: scale(1);
    }
    .slide::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(180deg, transparent, rgba(0,0,0,0.6));
      z-index: 1;
    }
    .slide .caption {
      background: var(--glass);
      backdrop-filter: blur(8px);
      padding: 20px;
      border-radius: 12px;
      font-family: 'Playfair Display', serif;
      color: #fff;
      position: relative;
      z-index: 2;
      transform: translateY(30px);
      opacity: 0;
      animation: slideUp 0.5s ease forwards 0.3s;
    }
    .slide .caption h2 {
      font-size: 28px;
      margin-bottom: 8px;
      animation: textGlow 2s ease-in-out infinite;
    }
    .slide .caption p { font-size: 14px; }
    @keyframes slideUp {
      to { transform: translateY(0); opacity: 1; }
    }
    @keyframes textGlow {
      0%, 100% { text-shadow: 0 0 5px var(--accent); }
      50% { text-shadow: 0 0 15px var(--accent); }
    }
    .slider .controls {
      position: absolute;
      left: 16px;
      right: 16px;
      top: 16px;
      display: flex;
      justify-content: space-between;
      z-index: 10;
    }
    .btn {
      background: var(--glass);
      backdrop-filter: blur(8px);
      padding: 12px 16px;
      border-radius: 12px;
      border: none;
      cursor: pointer;
      color: #fff;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .btn:hover {
      background: var(--accent);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    .slider .dots {
      position: absolute;
      bottom: 16px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 8px;
      z-index: 10;
    }
    .dot {
      width: 10px;
      height: 10px;
      background: var(--muted);
      border-radius: 50%;
      cursor: pointer;
      transition: background 0.3s ease, transform 0.3s ease;
    }
    .dot.active {
      background: var(--accent);
      transform: scale(1.3);
    }
    .dot:hover { background: var(--accent); }

    /* RIGHT PANEL */
    .right-card {
      background: var(--glass);
      backdrop-filter: blur(10px);
      padding: 32px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      transition: transform 0.3s ease;
    }
    .right-card:hover { transform: translateY(-5px); }
    .date-picker { display: flex; gap: 12px; align-items: center; }
    .countdown { display: flex; gap: 12px; margin-top: 24px; }
    .count-item {
      background: var(--glass-2);
      padding: 16px;
      border-radius: 12px;
      min-width: 80px;
      text-align: center;
      box-shadow: inset 0 2px 4px rgba(255,255,255,0.1), 0 2px 4px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
    }
    .count-item:hover { transform: scale(1.05); }

    /* SURPRISE */
    .surprise {
      margin-top: 24px;
      padding: 16px;
      border-radius: var(--radius);
      background: var(--glass-2);
      display: flex;
      gap: 16px;
      align-items: center;
      box-shadow: var(--shadow);
    }
    .surprise .reveal {
      padding: 12px 20px;
      background: linear-gradient(90deg, var(--accent), var(--accent-secondary));
      border: none;
      border-radius: 12px;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      color: #0f172a;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .surprise .reveal:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    /* AUDIO CONTROL */
    .audio-control {
      margin-top: 24px;
      display: flex;
      gap: 12px;
      align-items: center;
    }
    .audio-control .btn {
      padding: 12px 20px;
      background: linear-gradient(90deg, var(--accent), var(--accent-secondary));
      border: none;
      border-radius: 12px;
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      color: #0f172a;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .audio-control .btn:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    /* Gallery */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
      margin-top: 32px;
      animation: fadeInUp 0.8s ease;
    }
    .gallery img {
      width: 90%;
      height: 70%;
      object-fit: cover;
      border-radius: 12px;
      cursor: pointer;
      display: block;
      transition: all 0.4s ease;
      box-shadow: var(--shadow);
    }
    .gallery img:hover {
      transform: scale(1.1);
      box-shadow: 0 8px 20px rgba(0,0,0,0.3);
    }

    /* Wishes */
    .wishes-section {
      margin-top: 32px;
      background: var(--glass);
      backdrop-filter: blur(10px);
      padding: 24px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      animation: fadeInUp 0.8s ease;
    }
    .wish-form { display: flex; gap: 12px; }
    .wish-form input {
      flex: 1;
      padding: 14px;
      border-radius: 12px;
      border: 1px solid var(--glass-2);
      background: var(--glass);
      color: #fff;
      transition: border-color 0.3s ease;
    }
    .wish-form input:focus {
      border-color: var(--accent);
      outline: none;
    }
    .wish-list {
      margin-top: 16px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      max-height: 360px;
      overflow: auto;
    }
    .wish {
      background: var(--glass-2);
      padding: 14px;
      border-radius: 12px;
      transition: transform 0.3s ease;
      box-shadow: var(--shadow);
    }
    .wish:hover { transform: translateY(-3px); }

    /* Video messages */
    .video-section {
      margin-top: 32px;
      display: flex;
      gap: 16px;
      animation: fadeInUp 0.8s ease;
    }
    .video-section input[type=file] { display: block; }
    .video-section video {
      width: 85%;
      border-radius: 12px;
      background: #000;
      max-height: 70%;
      object-fit: cover;
      box-shadow: 0 0 15px var(--accent);
      transition: box-shadow 0.3s ease;
    }
    .video-section video:hover { box-shadow: 0 0 20px var(--accent); }

    /* Footer */
    footer {
      margin-top: 64px;
      padding: 32px;
      border-radius: var(--radius);
      background: var(--glass);
      backdrop-filter: blur(10px);
      display: flex;
      justify-content: space-between;
      align-items: center;
      position: relative;
      overflow: hidden;
      box-shadow: var(--shadow);
    }
    footer::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 100%;
      background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23f472b6" fill-opacity="0.1" d="M0,192L48,176C96,160,192,128,288,149.3C384,171,480,245,576,256C672,267,768,213,864,181.3C960,149,1056,139,1152,160C1248,181,1344,235,1392,261.3L1440,288L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
      z-index: -1;
    }
    .social-icons a {
      color: var(--muted);
      margin-left: 16px;
      font-size: 20px;
      transition: color 0.3s ease, transform 0.3s ease;
    }
    .social-icons a:hover {
      color: var(--accent);
      transform: scale(1.2);
    }

    /* Responsive */
    @media (max-width: 950px) {
      .hero { grid-template-columns: 1fr; }
      .slides, .slide { height: 320px; }
      .gallery { grid-template-columns: repeat(2, 1fr); }
      .right-card { order: 2; }
      .video-section { flex-direction: column; }
      .video-section video { max-height: 50%; }
      .slide .caption h2 { font-size: 24px; }
      .slide .caption p { font-size: 13px; }
    }
    @media (max-width: 520px) {
      .gallery { grid-template-columns: 1fr; }
      header { flex-direction: column; align-items: flex-start; padding: 16px; margin: 0 8px; }
      .container { padding: 16px; }
      .slides, .slide { height: 280px; }
      .slide .caption h2 { font-size: 20px; }
    }

    /* Small flourishes */
    .pill {
      padding: 8px 16px;
      background: var(--glass);
      border-radius: 999px;
      color: var(--muted);
      font-weight: 600;
      transition: background 0.3s ease, transform 0.3s ease;
    }
    .pill:hover { background: var(--accent); color: #0f172a; transform: translateY(-2px); }
    .muted { color: var(--muted); }

    /* Lightbox */
    .lightbox {
      position: fixed;
      inset: 0;
      background: rgba(2,6,23,0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      animation: fadeIn 0.3s ease;
    }
    .lightbox img {
      max-width: 90%;
      max-height: 85%;
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.5);
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Confetti canvas */
    #confettiCvs {
      position: fixed;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1000;
    }

    /* mobile responsive */

    .video-wrapper {
      position: relative;
      width: 100%;
      max-width: 800px;   /* চাইলে limit দাও */
      margin: auto;
      overflow: hidden;
      border-radius: 10px;
      background: #000;
      aspect-ratio: 16 / 9; /* আধুনিক browser এ safe */
    }

    .video-wrapper iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: 0;
    }

    /* যদি পুরোনো browser aspect-ratio না মানে */
    @supports not (aspect-ratio: 16/9) {
      .video-wrapper {
        padding-bottom: 56.25%; /* 16:9 fallback */
        height: 0;
      }
      .video-wrapper iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
    }
    

  </style>
</head>
<body>
  <canvas id="balloonCvs"></canvas>
  <canvas id="confettiCvs"></canvas>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">BD</div>
        <div>
          <div style="font-family:'Playfair Display',serif;font-size:24px;font-weight:700">Afia's Birthday</div>
          <div class="muted" style="font-size:14px">Celebrate beautifully</div>
        </div>
      </div>
      <nav>
        <a href="#hero">Home</a>
        <a href="#gallery">Gallery</a>
        <a href="#wishes">Wishes</a>
        
      </nav>
    </header>

    <main>
      <section id="hero" class="hero">
        <div class="slider" aria-hidden="false">
          <div class="slides" id="slides">
            <div class="slide" style="background-image:url('img1.jpg')">
              <div class="caption"><h2>Happy Birthday!</h2><p class="muted"> Have an amazing day 🎉</p></div>
            </div>
            <div class="slide" style="background-image:url('img2.jpg')">
              <div class="caption"><h2>Special Day</h2><p class="muted">Wishing you the best birthday yet!</p></div>
            </div>
            <div class="slide" style="background-image:url('img3.jpg')">
              <div class="caption"><h2>Sweet Moments</h2><p class="muted">All the best on your special day!</p></div>
            </div>
            <div class="slide" style="background-image:url('img4.jpg')">
              <div class="caption"><h2>Wishing you endless</h2><p class="muted">happiness, success, and all the love in the world on your special day!</p></div>
            </div>
            <div class="slide" style="background-image:url('img5.jpg')">
              <div class="caption"><h2>Afraa</h2><p class="muted">my dear friend! May your day be as amazing as you are</p></div>
            </div>
          </div>
          <div class="controls">
            <div class="btn" id="prev">◀</div>
            <div style="display:flex;gap:12px">
              <div class="btn" id="pause">⏸</div>
              <div class="btn" id="next">▶</div>
            </div>
          </div>
          <div class="dots" id="dots"></div>
        </div>

        <aside class="right-card">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div>
              <div style="font-family:'Playfair Display',serif;font-weight:700;font-size:20px">Afia's birthday is coming...</div>
              <div class="muted" style="font-size:14px">Countdown to the Day</div>
            </div>
            <div class="pill">🎈🎈🎈</div>
          </div>

          <div style="margin-top:24px" class="date-picker">
            <input id="dateInput" type="datetime-local" style="padding:12px;border-radius:12px;background:var(--glass);border:1px solid var(--glass-2);color:#fff" />
            <button class="btn" id="setDateBtn">Set</button>
          </div>

          <div class="countdown" id="countdown">
            <div class="count-item"><div id="days">00</div><div class="muted" style="font-size:13px">Days</div></div>
            <div class="count-item"><div id="hours">00</div><div class="muted" style="font-size:13px">Hours</div></div>
            <div class="count-item"><div id="minutes">00</div><div class="muted" style="font-size:13px">Minutes</div></div>
            <div class="count-item"><div id="seconds">00</div><div class="muted" style="font-size:13px">Seconds</div></div>
          </div>

          <div class="surprise">
            <div>
              <div style="font-family:'Playfair Display',serif;font-weight:700">Surprise Box</div>
              <div class="muted" style="font-size:14px">Click reveal for a surprise!</div>
            </div>
            <div style="margin-left:auto">
              <button class="reveal" id="revealBtn">Reveal 🎉</button>
            </div>
          </div>

          <div class="audio-control">
            <button class="btn" id="musicToggle">Play plz</button>
            <div class="muted" style="font-size:14px">Bandhobi Button a ektu click kor</div>
          </div>
        </aside>
      </section>

      <section id="gallery">
        <h3 style="margin-top:32px;font-family:'Playfair Display',serif">Gallery</h3>
        <div class="gallery" id="galleryGrid">
          <img src="pic1.jpg" alt="g1"/>
          <img src="pic2.jpg" alt="g2"/>
          <img src="pic3.jpg" alt="g3"/>
          <img src="pic4.jpg" alt="g4"/>
          <img src="pic5.jpg" alt="g5"/>
          <img src="pic6.jpg" alt="g6"/>
          <img src="pic7.jpg" alt="g6"/>
          <img src="pic8.jpg" alt="g6"/>
          <img src="pic9.jpg" alt="g6"/>
          <img src="pic12.jpg" alt="g6"/>
        </div>
      </section>

      <section id="wishes" class="wishes-section">
        <h3 style="font-family:'Playfair Display',serif">Wishes Wall</h3>
        <div class="wish-form">
          <input id="wishInput" placeholder="Type your wish..." aria-label="Type your birthday wish" />
          <button class="btn" id="wishBtn">Send</button>
        </div>
        <div class="wish-list" id="wishList"></div>
      </section>

      <section id="video">
        <h3 style="margin-top:32px;font-family:'Playfair Display',serif">Memorises</h3>
        <div class="video-section">
          <div>
            <input id="videoFile" type="file" accept="video/*" aria-label="Upload a video message" />
            <div style="margin-top:12px"><small class="muted">Pagli video ta dekh, jodio valo kore edit kore video banale valoi hoito, kintu file size abar beshi boro hoye jay, tai R kora gelo na</small></div>
          </div>
          <div class="video-wrapper">
    <iframe 
      src="https://drive.google.com/file/d/10r9LgDhF-9nOUKrhR4T3X5EWJgTjQWkc/preview" 
      allow="autoplay" 
      allowfullscreen>
    </iframe>
  </div>
          <div style="flex:1">





          </div>
        </div>
      </section>

    </main>

    <footer>
      <div>
        <div style="font-family:'Playfair Display',serif;font-weight:700">Bandhobi ❤️</div>
        <div class="muted" style="font-size:14px">3/4 din dhore vabtesi je ki lekhbo ki lekhbo kintu kono kicu e mathay aslo na. 
          Somoy je koto taratari jai bujha e jay na, ei to sei din mone hoy varsity te gelam kintu majhkhane koyek bosor chole gese
              , ei somoy gula R kono din asbe na. ager din gula e onek valo chilo, eita banate giye kicu ta emotional e hoye gesilam. <br> goto bosor haste haste bolsilam
              samner bar bar aste aste hoyto tora shosur bari thakbi akhon sotti sotti e shosur bari e,
              <br><br>ei bar R tor sathe dekha korte parlam na, kharap lagtese ektu kintu ki R korar.. 
              <br>Next time jodi kopale thake tahole dekha hobe.
            </div>
      </div>
       

    </footer>
    <footer>
      <div>
        <div style="font-family:'Playfair Display',serif;font-weight:700"> ❤️❤️❤️</div>
        <div class="muted" style="font-size:14px">
          Dekhte dekhte jiboner aro ekta bosor par kore felli, hayat fixed jibon theke aro ekta bosor chole gelo, seta amader sobar e chole jacche.

          
        </div>
      </div>
       
      
    </footer>
    <footer>
      <div>
        <div style="font-family:'Playfair Display',serif;font-weight:700">Again Happy Birthday ❤️</div>
        <div class="muted" style="font-size:14px">
          Do'a kori Allah tore sob somoy valo rakhuk, jibone onek boro hoo, sob somoy hashi kushi thak etai amar chaowa,
          jibone onek valo kicu kor, Allah tor sob nek chaowa purun kore dek, hazar bosor beche thak.

        </div>
      </div>
       
      
    </footer>

    <div class="lightbox" id="lightbox" role="dialog" aria-hidden="true"><img id="lbImg" alt="Enlarged gallery image"/></div>
  </div>

  <audio id="bgMusic" autoplay loop src="audio.mp3"></audio>

  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script>
    // --- Balloon Animation ---
    function runBalloons() {
      const cvs = document.getElementById('balloonCvs');
      const ctx = cvs.getContext('2d');
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);
      const balloons = [];
      const numBalloons = 20;
      const colors = ['#f472b6', '#facc15', '#60a5fa', '#a78bfa', '#4ade80'];

      function createBalloon() {
        return {
          x: Math.random() * cvs.width,
          y: cvs.height + 50,
          vy: -(1 + Math.random() * 2),
          vx: (Math.random() - 0.5) * 1,
          r: 15 + Math.random() * 15,
          color: colors[Math.floor(Math.random() * colors.length)],
          sway: Math.random() * 0.05,
          phase: Math.random() * Math.PI * 2,
          rot: Math.random() * 0.1,
          rotSpeed: (Math.random() - 0.5) * 0.02
        };
      }

      function initBalloons() {
        for (let i = 0; i < numBalloons; i++) {
          balloons.push(createBalloon());
        }
      }

      function drawBalloon(b) {
        ctx.fillStyle = b.color;
        ctx.save();
        ctx.translate(b.x, b.y);
        ctx.rotate(b.rot);
        ctx.beginPath();
        ctx.ellipse(0, 0, b.r, b.r * 1.4, 0, 0, Math.PI * 2);
        ctx.fill();
        ctx.strokeStyle = '#fff';
        ctx.lineWidth = 1;
        ctx.beginPath();
        ctx.moveTo(0, b.r * 1.4);
        ctx.lineTo(0, b.r * 2);
        ctx.stroke();
        ctx.restore();
      }

      function updateBalloons() {
        for (let i = 0; i < balloons.length; i++) {
          const b = balloons[i];
          b.y += b.vy;
          b.x += b.vx + Math.sin(b.phase) * b.sway;
          b.phase += 0.05;
          b.rot += b.rotSpeed;
          if (b.y < -b.r * 2) {
            balloons[i] = createBalloon();
          }
        }
      }

      function frame() {
        ctx.clearRect(0, 0, cvs.width, cvs.height);
        updateBalloons();
        balloons.forEach(drawBalloon);
        requestAnimationFrame(frame);
      }

      function resizeCanvas() {
        cvs.width = window.innerWidth;
        cvs.height = window.innerHeight;
      }

      initBalloons();
      frame();
    }
    runBalloons();

    // --- Slider ---
    const slidesEl = document.getElementById('slides');
    const slides = Array.from(document.querySelectorAll('.slide'));
    const dotsEl = document.getElementById('dots');
    let idx = 0;
    let playing = true;
    let slideTimer;

    function initDots() {
      slides.forEach((_, i) => {
        const dot = document.createElement('div');
        dot.className = 'dot';
        dot.addEventListener('click', () => {
          goTo(i);
          stopAuto();
        });
        dotsEl.appendChild(dot);
      });
      updateDots();
    }

    function updateDots() {
      Array.from(dotsEl.children).forEach((dot, i) => {
        dot.classList.toggle('active', i === idx);
      });
    }

    function goTo(i) {
      idx = (i + slides.length) % slides.length;
      slides.forEach((s, j) => s.classList.toggle('active', j === idx));
      updateDots();
    }

    function next() { goTo(idx + 1); }
    function prev() { goTo(idx - 1); }
    function startAuto() {
      slideTimer = setInterval(next, 2000);
      playing = true;
      document.getElementById('pause').textContent = '⏸';
    }
    function stopAuto() {
      clearInterval(slideTimer);
      playing = false;
      document.getElementById('pause').textContent = '▶';
    }

    document.getElementById('next').addEventListener('click', () => { next(); stopAuto(); });
    document.getElementById('prev').addEventListener('click', () => { prev(); stopAuto(); });
    document.getElementById('pause').addEventListener('click', () => { playing ? stopAuto() : startAuto(); });
    initDots();
    goTo(0);
    startAuto();

    // --- Countdown ---
    const daysEl = document.getElementById('days'), hoursEl = document.getElementById('hours'), minutesEl = document.getElementById('minutes'), secondsEl = document.getElementById('seconds');
    const dateInput = document.getElementById('dateInput');
    const setDateBtn = document.getElementById('setDateBtn');
    const defaultDate = new Date('2025-09-21T00:00:00');
    dateInput.value = defaultDate.toISOString().slice(0, 16);
    let target = new Date(dateInput.value);
    function updateCountdown() {
      const now = new Date();
      const diff = target - now;
      if (diff <= 0) {
        daysEl.textContent = '00';
        hoursEl.textContent = '00';
        minutesEl.textContent = '00';
        secondsEl.textContent = '00';
        return;
      }
      const s = Math.floor(diff / 1000);
      const d = Math.floor(s / 86400);
      const h = Math.floor((s % 86400) / 3600);
      const m = Math.floor((s % 3600) / 60);
      const sec = s % 60;
      daysEl.textContent = String(d).padStart(2, '0');
      hoursEl.textContent = String(h).padStart(2, '0');
      minutesEl.textContent = String(m).padStart(2, '0');
      secondsEl.textContent = String(sec).padStart(2, '0');
    }
    setDateBtn.addEventListener('click', () => {
      target = new Date(dateInput.value);
      updateCountdown();
    });
    setInterval(updateCountdown, 1000);

    // --- Surprise reveal + confetti ---
    const revealBtn = document.getElementById('revealBtn');
    revealBtn.addEventListener('click', () => {
      revealBtn.textContent = 'Enjoy! 🎉';
      runConfetti();
      setTimeout(() => { revealBtn.textContent = 'Reveal 🎉'; }, 4000);
    });

    // --- Confetti (enhanced) ---
    function runConfetti() {
      const cvs = document.getElementById('confettiCvs');
      const ctx = cvs.getContext('2d');
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);
      const num = 150;
      const pieces = [];
      const shapes = ['rect', 'circle', 'star'];
      for (let i = 0; i < num; i++) {
        const shape = shapes[Math.floor(Math.random() * shapes.length)];
        pieces.push({
          x: Math.random() * cvs.width,
          y: Math.random() * -cvs.height,
          vy: 3 + Math.random() * 7,
          vx: (Math.random() - 0.5) * 5,
          r: 5 + Math.random() * 8,
          c: ['#f472b6', '#facc15', '#60a5fa', '#a78bfa', '#4ade80'][Math.floor(Math.random() * 5)],
          rot: Math.random() * Math.PI * 2,
          rotSpeed: (Math.random() - 0.5) * 0.1,
          shape
        });
      }
      let t = 0;
      function drawStar(x, y, r, ctx) {
        ctx.beginPath();
        for (let i = 0; i < 5; i++) {
          ctx.lineTo(Math.cos((18 + i * 72) / 180 * Math.PI) * r + x, -Math.sin((18 + i * 72) / 180 * Math.PI) * r + y);
          ctx.lineTo(Math.cos((54 + i * 72) / 180 * Math.PI) * r * 0.5 + x, -Math.sin((54 + i * 72) / 180 * Math.PI) * r * 0.5 + y);
        }
        ctx.closePath();
        ctx.fill();
      }
      function frame() {
        ctx.clearRect(0, 0, cvs.width, cvs.height);
        for (const p of pieces) {
          p.x += p.vx;
          p.y += p.vy;
          p.vy += 0.05;
          p.rot += p.rotSpeed;
          ctx.fillStyle = p.c;
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          if (p.shape === 'rect') {
            ctx.beginPath();
            ctx.rect(-p.r, -p.r * 0.6, p.r * 2, p.r * 1.2);
            ctx.fill();
          } else if (p.shape === 'circle') {
            ctx.beginPath();
            ctx.arc(0, 0, p.r, 0, Math.PI * 2);
            ctx.fill();
          } else {
            drawStar(0, 0, p.r, ctx);
          }
          ctx.restore();
        }
        t++;
        if (t < 250) requestAnimationFrame(frame);
        else ctx.clearRect(0, 0, cvs.width, cvs.height);
      }
      frame();
      function resizeCanvas() {
        cvs.width = window.innerWidth;
        cvs.height = window.innerHeight;
      }
    }

    // --- Music control ---
    const musicBtn = document.getElementById('musicToggle');
    const bgMusic = document.getElementById('bgMusic');
    let musicPlaying = false;
    musicBtn.addEventListener('click', () => {
      if (musicPlaying) {
        bgMusic.pause();
        musicPlaying = false;
        musicBtn.textContent = 'Play Music';
      } else {
        bgMusic.play().catch(() => {});
        musicPlaying = true;
        musicBtn.textContent = 'Pause Music';
      }
    });

    // --- Gallery lightbox ---
    document.getElementById('galleryGrid').addEventListener('click', e => {
      if (e.target.tagName === 'IMG') {
        document.getElementById('lbImg').src = e.target.src;
        document.getElementById('lightbox').style.display = 'flex';
        document.getElementById('lightbox').setAttribute('aria-hidden', 'false');
      }
    });
    document.getElementById('lightbox').addEventListener('click', () => {
      document.getElementById('lightbox').style.display = 'none';
      document.getElementById('lightbox').setAttribute('aria-hidden', 'true');
    });

    // --- Wishes (localStorage) ---
    const wishInput = document.getElementById('wishInput');
    const wishBtn = document.getElementById('wishBtn');
    const wishList = document.getElementById('wishList');
    function loadWishes() {
      const arr = JSON.parse(localStorage.getItem('birthday_wishes') || '[]');
      wishList.innerHTML = '';
      arr.reverse().forEach(w => {
        const d = document.createElement('div');
        d.className = 'wish';
        d.innerHTML = `<strong>${escapeHtml(w.text)}</strong><div class="muted" style="font-size:13px">${new Date(w.time).toLocaleString()}</div>`;
        wishList.appendChild(d);
      });
    }
    function escapeHtml(s) {
      return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }
    wishBtn.addEventListener('click', () => {
      const txt = wishInput.value.trim();
      if (!txt) return;
      const arr = JSON.parse(localStorage.getItem('birthday_wishes') || '[]');
      arr.push({ text: txt, time: Date.now() });
      localStorage.setItem('birthday_wishes', JSON.stringify(arr));
      wishInput.value = '';
      loadWishes();
    });
    loadWishes();

    // --- Video upload preview ---
    const videoFile = document.getElementById('videoFile');
    const videoPreview = document.getElementById('videoPreview');
    videoFile.addEventListener('change', () => {
      const f = videoFile.files[0];
      if (!f) return;
      const url = URL.createObjectURL(f);
      videoPreview.src = url;
      videoPreview.play().catch(() => {});
    });

    // --- Accessibility: keyboard navigation ---
    window.addEventListener('keydown', e => {
      if (e.key === 'ArrowLeft') prev();
      if (e.key === 'ArrowRight') next();
      if (e.key === 'Escape' && document.getElementById('lightbox').style.display === 'flex') {
        document.getElementById('lightbox').style.display = 'none';
        document.getElementById('lightbox').setAttribute('aria-hidden', 'true');
      }
    });
  </script>
</body>
</html>